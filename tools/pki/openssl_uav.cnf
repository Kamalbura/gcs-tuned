# OpenSSL configuration for UAV Fleet PKI
# - Root CA profile
# - Server profile with SAN for broker
# - Client profile (UAV and GCS)

[ ca ]
default_ca = CA_default

[ CA_default ]
# Directories are not used by this script; we sign ad-hoc.
new_certs_dir = .
database      = index.txt
serial        = serial

[ req ]
default_bits        = 2048
default_md          = sha256
default_keyfile     = privkey.pem
distinguished_name  = req_distinguished_name
req_extensions      = v3_req

[ req_distinguished_name ]
countryName                     = Country Name (2 letter code)
countryName_default             = IN
stateOrProvinceName             = State or Province Name
stateOrProvinceName_default     = Telangana
localityName                    = Locality Name
localityName_default            = Hyderabad
0.organizationName              = Organization Name
0.organizationName_default      = UAV-Fleet
organizationalUnitName          = Organizational Unit Name
organizationalUnitName_default  = Unit
commonName                      = Common Name
commonName_max                  = 64
emailAddress                    = Email Address
emailAddress_max                = 64

[ v3_req ]
# Empty by default; add extensions when needed per cert type.

[ v3_ca ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid:always,issuer
basicConstraints = critical, CA:true
keyUsage = critical, digitalSignature, cRLSign, keyCertSign

[ v3_server ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer
basicConstraints = CA:false
keyUsage = critical, digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth
subjectAltName = @alt_names

[ v3_client ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer
basicConstraints = CA:false
keyUsage = critical, digitalSignature, keyEncipherment
extendedKeyUsage = clientAuth

# Adjust these SANs to your broker hostnames/IPs as needed.
[ alt_names ]
DNS.1 = uav-broker.local
DNS.2 = localhost
IP.1 = 127.0.0.1
# Add your LAN IP if you connect via IP to avoid hostname verification issues:
# IP.2 = 192.168.1.10
